SELECT
    sc.id,
    sc.state,
    sc.statestarttime,
    sc.deadlinetime,

    /* Флаг: таймер на паузе */
    CASE WHEN sc.timeallowancetimers = 'p' THEN 1 ELSE 0 END AS is_paused,

    /* Эффективный дедлайн (как правило, то что показывает UI при паузе):
       базовый deadlinetime + (текущее время - момент входа в ожидание) */
    CASE
      WHEN sc.timeallowancetimers = 'p'
        THEN sc.deadlinetime + (SYSDATE - sc.statestarttime)
      ELSE
        sc.deadlinetime
    END AS effective_deadline
FROM nausd40.tbl_servicecall sc
WHERE sc.id = 223751730;
